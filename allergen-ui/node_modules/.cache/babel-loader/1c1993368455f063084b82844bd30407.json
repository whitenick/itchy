{"ast":null,"code":"'use strict';\n\nvar util = require('util');\n\nvar levels = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];\n\nvar noop = function () {};\n\nmodule.exports = function (opts) {\n  opts = opts || {};\n  opts.level = opts.level || 'info';\n  var logger = {};\n\n  var shouldLog = function (level) {\n    return levels.indexOf(level) >= levels.indexOf(opts.level);\n  };\n\n  levels.forEach(function (level) {\n    logger[level] = shouldLog(level) ? log : noop;\n\n    function log() {\n      var prefix = opts.prefix;\n      var normalizedLevel;\n\n      if (opts.stderr) {\n        normalizedLevel = 'error';\n      } else {\n        switch (level) {\n          case 'trace':\n            normalizedLevel = 'info';\n            break;\n\n          case 'debug':\n            normalizedLevel = 'info';\n            break;\n\n          case 'fatal':\n            normalizedLevel = 'error';\n            break;\n\n          default:\n            normalizedLevel = level;\n        }\n      }\n\n      if (prefix) {\n        if (typeof prefix === 'function') prefix = prefix(level);\n        arguments[0] = util.format(prefix, arguments[0]);\n      }\n\n      console[normalizedLevel](util.format.apply(util, arguments));\n    }\n  });\n  return logger;\n};","map":null,"metadata":{},"sourceType":"script"}